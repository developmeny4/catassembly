mod parser;
mod ir;
use serde_json::json;

fn main() {
    println!("CatAssembly Transpiler.");
    let mystr = "
        
        event WhenWebsiteLoaded(): log(\"hello wordl!\");
        event WhenWebsiteLoaded(): {
            log(\"hello world!\");
        }
        ";
    let tokenized = parser::tokenize(mystr);
    println!("{} tokens", tokenized.len());
   

    let compiled = ir::parse_code(tokenized);

    let jsonified = ir::jsonify(compiled);
    let stringified = serde_json::to_string(&jsonified).unwrap();
    
    println!("\n !!! TRANSPILED CODE !!! \n")
    println!("{}", stringified);
}
